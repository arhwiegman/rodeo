\documentclass[a4paper,10pt]{article}
\usepackage{rotfloat}
\usepackage{amssymb}
\usepackage{xcolor}

\usepackage{Sweave}
\begin{document}
\input{create_documentation-concordance}

\tableofcontents

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Initializations


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Tables of variables, parameters, functions

\section{State variables, parameters, and functions}

Tables~\ref{tab:vars}, \ref{tab:pars}, and \ref{tab:funs} contain the declaration of state variables, parameters, and functions.

\begin{table}[!h]
  \caption{Table of state variables. \label{tab:vars}}
  \begin{center}
  \begin{tabular}{lll}\hline
    \textbf{Symbol} & \textbf{Unit} & \textbf{Description} \\ \hline
    $c_{DO}$ & mg/l & Dissolved O2 \\
    $c_Z$ & mg/l & Degradable org. matter Z \\
    $v$ & m3 & Water volume in reactor \\ \hline
  \end{tabular}  \end{center}
\end{table}

\begin{table}[!h]
  \caption{Table of parameters. \label{tab:pars}}
  \begin{center}
  \begin{tabular}{lll}\hline
    \textbf{Symbol} & \textbf{Unit} & \textbf{Description} \\ \hline
    $q_{in}$ & m3/s & Inflow rate \\
    $q_{ex}$ & m3/s & Outflow rate \\
    $k_d$ & 1/d & Decay rate \\
    $s_{DO,Z}$ & g/g & Stoichiometry (O2/Z) \\
    $h_{DO}$ & g/m3 & Half-saturation O2 \\
    $T$ & degC & Temperature \\
    $W$ & m/s & Wind speed \\
    $D$ & m & Water depth \\ \hline
  \end{tabular}  \end{center}
\end{table}

\begin{table}[!h]
  \caption{Table of functions. \label{tab:funs}}
  \begin{center}
  \begin{tabular}{lll}\hline
    \textbf{Symbol} & \textbf{Unit} & \textbf{Description} \\ \hline
    $O2_{sat}$ & mg/l & O2 saturation, f(temp) \\
    $k_a$ & 1/d & Aeration, f(wind, depth) \\
    $monod$ & - & Monod model \\
    $c_{Z,in}$ & g/m3 & Z in inflow, f(time) \\
    $c_{DO,in}$ & g/m3 & O2 in inflow, f(time) \\ \hline
  \end{tabular}  \end{center}
\end{table}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Processes

\section{Simulated processes}

The simulated processes are summarized in Table~\ref{tab:pros}. For models with lengthy math expressions, it may be necessary to rotate this table, e.~g. using \texttt{\textbackslash sidewaystable} from the \texttt{rotfloat} package. Another options is to restrict the width of the table's last colum using the \texttt{width} and \texttt{align} arguments of \texttt{exportDF}.

\begin{table}[!h]
  \caption{Table of processes. \label{tab:pros}}
  \begin{center}
  \begin{tabular}{llll}\hline
    \textbf{Name} & \textbf{Unit} & \textbf{Description} & \textbf{Process rate expression} \\ \hline
    flow & m3/s & Water balance & $q_{in} - q_{ex}$ \\
    flushing & 1/s & Flushing rate & $q_{in} / v$ \\
    decay & g/m3/s & Decay of z & $k_d \cdot  c_Z \cdot  monod(c_{DO}, h_{DO})$ \\
    aeration & g/m3/s & O2-exchange & $k_a(W,D) \cdot  (O2_{sat}(T) - c_{DO})$ \\ \hline
  \end{tabular}  \end{center}
\end{table}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Stoichiometry

\section{Stoichiometry}

The link between state variables and processes is determined by the stoichiometry information. It can be presented in tabular form (Table~\ref{tab:stoiExpr}), as a numeric matrix (Table~\ref{tab:stoiNum}), or as a quasi-figure (Fig.~\ref{fig:stoiSymb}).

\begin{table}[!h]
  \caption{Stoichiometry in tabular form. \label{tab:stoiExpr}}
  \begin{center}
  \begin{tabular}{lll}\hline
    \textbf{Variable} & \textbf{Process} & \textbf{Stoichiometry factor} \\ \hline
    $v$ & flow & $1$ \\
    $c_Z$ & flushing & $c_{Z,in}(time) - c_Z$ \\
    $c_Z$ & decay & $-1$ \\
    $c_{DO}$ & flushing & $c_{DO,in}(time) - c_{DO}$ \\
    $c_{DO}$ & decay & $-s_{DO,Z}$ \\
    $c_{DO}$ & aeration & $1$ \\ \hline
  \end{tabular}  \end{center}
\end{table}

In order to populate the matrix with numeric data, we need to
\begin{enumerate}
  \item assign values to parameters,
  \item assign values to the state variables,
  \item define any functions (in R code).
\end{enumerate}


\begin{table}[!h]
  \begin{center}
  \caption{Stoichiometry matrix for given variable values, parameters, and functions. \label{tab:stoiNum}}
  \begin{tabular}{lrrr}\hline
    $Process$ & $c_{DO}$ & $c_Z$ & $v$ \\ \hline
    flow & $0$ & $0$ & $1$ \\
    flushing & $0$ & $-1$ & $0$ \\
    decay & $-2.76$ & $-1$ & $0$ \\
    aeration & $1$ & $0$ & $0$ \\ \hline
  \end{tabular}  \end{center}
\end{table}


\begin{figure}[!h]
  \begin{center}
  \begin{tabular}{lrrr}\hline
    $Process$ & $c_{DO}$ & $c_Z$ & $v$ \\ \hline
    flow &  &  & \textcolor{orange}{$\blacktriangle$} \\
    flushing &  & \textcolor{cyan}{$\blacktriangledown$} &  \\
    decay & \textcolor{cyan}{$\blacktriangledown$} & \textcolor{cyan}{$\blacktriangledown$} &  \\
    aeration & \textcolor{orange}{$\blacktriangle$} &  &  \\ \hline
  \end{tabular}  \end{center}
  \caption{Same information as in Tab.~\ref{tab:stoiNum} but the sign of the stoichiometry factors is represented by triangles ($\blacktriangle$: positive, $\blacktriangledown$: negative). Empty cells denote missing (direct) interactions. \label{fig:stoiSymb}}
\end{figure}


\end{document}
